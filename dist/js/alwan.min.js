!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Alwan",[],e):"object"==typeof exports?exports.Alwan=e():t.Alwan=e()}(self,(function(){return function(){"use strict";var t={d:function(e,l){for(var r in l)t.o(l,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:l[r]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}},e={};t.d(e,{default:function(){return Ht}});const l=document,r=l.documentElement,n="button",o="svg",s="open",i="close",a="color",u="click",p="mousedown",c="scroll",h="keydown",d="input",_="change",f="focusin",w="focusout",g="hex",m="rgb",b="hsl",v="hsv",y="lw-focus",x="lw-btn",A="lw-color",L="remove",$=[g,m,b],{max:H,min:O,round:V,abs:j}=Math,M=parseFloat,k=parseInt,S=(t,e)=>{for(const l in t)if(Object.hasOwnProperty.call(t,l)&&e(t[l],l,t))return!1;return!0},C=(t,...e)=>Object.assign(t,...e),E=(t,e)=>S(t,((t,l)=>!e||e[l]!==t)),I=t=>"string"==typeof t,z=t=>null!=t,P=(t,e,l)=>O(H(t,l||0),e||100),T=(t,e,l)=>{if(t._s.t(e,!0)){let e=t._e.i;e(a,l),e(_,l)}},D=(t,e,r)=>I(t)?t&&(e||l)["querySelector"+(r?"All":"")](t):t instanceof Element?t:null,F=(t,e,l,r,n)=>{r=r||{};const s="http://www.w3.org/"+(t===o?"2000/svg":"1999/xhtml"),i=document.createElementNS(s,t||"div");return e&&(i.className=e),S(r,((t,e)=>{"html"===e?G(i,t):"text"===e?i.innerText=t:t&&i.setAttributeNS("",e,t)})),l&&l.appendChild(i),n&&n(i),i},N=t=>t&&t.getBoundingClientRect(),Z=t=>t.parentElement,q=(t,e)=>Z(e).replaceChild(t,e)&&t,B=(t,e)=>t&&Z(t).removeChild(t)&&(e?null:t),K=(t,e,l)=>{t&&t.style.setProperty("--"+e,l)},R=(t,e)=>{let l=e&&e.length;null!=l&&(e=l),t.style.display=e?"":"none"},U=(t,e,l)=>{e&&t.classList[l?"add":L](e)},G=(t,e)=>{t.innerHTML=e||""},J={id:"",classname:"",theme:"light",toggle:!0,popover:!0,position:"bottom-start",margin:8,preset:!0,color:"#000",default:"#000",target:"",disabled:!1,format:"rgb",singleInput:!1,inputs:{rgb:!0,hex:!0,hsl:!0},opacity:!0,preview:!0,copy:!0,swatches:[]},Q=(t,e)=>{let l=(e?L:"add")+"EventListener",[r,n,o,s]=t;I(n)&&(n=[n]),n.forEach((t=>{r[l](t,o,s)}))},W=(t,e,l,r,n)=>{if(e){let o=[e,l,r,n=n||!1];Q(o),t.push(o)}return t},X=(t,e)=>t.filter((t=>e!==t[0]||Q(t,!0))),Y="top",tt="right",et="bottom",lt="left",rt="start",nt="center",ot="end",st="width",it="height",at=t=>{let e,n,o,{config:a,_e:{i:u},_s:d}=t,_=F("","alwan",l.body),f={e:[]},w=!1,g=[];const m=t=>{var r;w&&(y(),r=e,g.every((t=>{let e=!0;if(t!==l){let{top:l,bottom:n}=N(r),{top:o,bottom:s}=N(t);e=l>=o&&s>=n}return e}))||A(!0))},b=t=>{let e=f.e;g.forEach((l=>{e=t(e,l,c,m)})),e=t(e,window,"resize",m),e=t(e,l,[p,h],v),f.e=e},v=l=>{if(w){let r,{target:n,type:s,key:i,shiftKey:a}=l,u=t._c.palette.$;"Escape"===i||s===p&&e!==n&&!_.contains(n)?A():"Tab"===i&&(n!==e||a?(!a&&n===o||n===u&&a)&&(r=e):r=u,r&&(l.preventDefault(),r.focus()))}},y=()=>{n&&n.u()},x=t=>{w||a.disabled||(d.u({},!0),y(),U(_,s,!0),w=!0,!t&&u(s))},A=t=>{w&&a.toggle&&(U(_,s,!1),w=!1,!t&&u(i))},L=t=>{a.disabled=t,t&&A(!0),U(e,"lw-disabled",t)};return C(f,{$:_,p:s=>{s=s||{};let i,a=C(t.config,s),{theme:u,popover:p,target:h,position:d,margin:f,disabled:w,id:m,toggle:v}=a,y=D(h),A=s.color;m&&(_.id=m),S(t._c,(t=>{let e=t._;e&&e(a)})),A&&T(t,A),e=t._c.ref.$,i=y||e,b(X),L(w),_.dataset.theme=u,v||x(!0),R(e,p||v),p?(n=((t,e,l)=>{l=l||{};let n,o,s,{margin:i,position:a}=l,[u,p]=a?a.split("-"):[],c={[Y]:[Y,et,tt,lt],[et]:[et,Y,tt,lt],[tt]:[tt,lt,Y,et],[lt]:[lt,tt,Y,et]},h={[rt]:[rt,nt,ot],[nt]:[nt,rt,ot],[ot]:[ot,nt,rt]};i=null==i?6:M(i),u=c[u]?u:et,p=p?h[p]?p:rt:nt;const d=(t,l)=>{!1!==l&&(e.style[t?Y:lt]=l+"px")},_=t=>{let e=st,l=tt;t&&(e=it,l=et),d(t,(n[l]-s[e])/2)},f=()=>{n={top:0,left:0,right:r.clientWidth,bottom:r.clientHeight},o=N(t),s=N(e),c[u].some((t=>{let e=t===Y||t===et,l=n[t],r=o[t],a=i+s[e?it:st],u=a<=j(l-r);return u&&(d(e,r+(l?i:-a)),h[p].some((t=>{let l=it,r=Y,i=et;e&&(l=st,r=lt,i=tt);let a=o[r],u=o[i],p=j(n[r]-u),c=j(n[i]-a),h=o[l],_=s[l],f=(_+h)/2,w={[rt]:_<=c&&a,[nt]:f<=p&&f<=c&&u-f,[ot]:_<=p&&u-_};return w=w[t],d(!e,w),!1!==w}))||_(!e)),u}))||(_(!0),_())};return f(),{u:f}})(i,_,{position:d,margin:f}),g=(t=>{t=Z(t);let e=[l];for(;t!==l.body;){let l=getComputedStyle(t).overflow;"auto"!==l&&l!==c||e.push(t),t=Z(t)}return e})(e),b(W)):i.insertAdjacentElement((y?"before":"after")+"end",_),U(_,"lw-popper",p),o=D("button,input",_,!0),o=o[o.length-1]},m:()=>w,A:x,L:A,H:()=>{w?A():x()},O:L,V:y})},ut={"aria-role":"none",focusable:"false"},pt=(t,e,l,r)=>({width:t,height:e,viewBox:l,html:r}),ct=C(pt("18","18","0 0 24 24",'<path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path>'),ut),ht=C(pt("18","18","0 0 24 24",'<path d="M9,20.42L2.79,14.21L5.62,11.38L9,14.77L18.88,4.88L21.71,7.71L9,20.42Z"></path>'),ut),dt=C(pt("15","15","0 0 20 20",'<path d="M10 1L5 8h10l-5-7zm0 18l5-7H5l5 7z"></path>'),ut),_t=(t,e)=>{const{_s:r,_e:{i:n}}=e,o=F("","alwan__palette",t,{tabindex:"0"}),s=F("","lw-overlay",t);R(s,!1);const i={ArrowRight:1,ArrowLeft:-1},u={ArrowUp:-1,ArrowDown:1},c=(t=>{const e=F("","alwan__marker",t),{width:l,height:r}=N(e);let n=l/2,o=r/2,s=0,i=0;return{$:e,j:(t,l)=>{s=t,i=l,e.style.transform=`translate(${t-n}px, ${l-o}px)`},M:()=>({x:s,y:i})}})(o);let d,_,g,{j:m}=c,b=[],v=!1;const x=(t,e)=>{m(t,e),r.u({s:t/d,v:1-e/_}),n(a,o)},A=t=>{let e,l,{top:r,left:n}=g,o=t.touches;t.preventDefault(),o&&(t=o[0]),e=t.clientX-n,l=t.clientY-r,e=e<0?0:e>d?d:e,l=l<0?0:l>_?_:l,x(e,l)},L=t=>{({width:d,height:_}=t||N(o))};return W(b,o,[p,"touchstart"],(t=>{t.touches&&t.touches.length>1||(r.k(),g=N(o),L(g),A(t),v=!0,R(s,v),o.focus())})),W(b,l,["mousemove","touchmove"],(t=>{!v||t.touches&&t.touches.length>1||A(t)}),{passive:!1}),W(b,l,["mouseup","touchend","touchcancel"],(t=>{v&&(r.S(o),v=!1,R(s,v))})),W(b,o,[w,f],(t=>{let e=!1;t.type===w?o.blur():e=!v,U(o,y,e)})),W(b,o,h,(t=>{U(o,y,!0);let e=t.key;if(i[e]||u[e]){t.preventDefault(),L();let{x:l,y:r}=c.M(),n=l,o=r;l+=(i[e]||0)*(d/100),r+=(u[e]||0)*(_/100),l=l>d?d:l<0?0:l,r=r>_?_:r<0?0:r,l===n&&r===o||x(l,r)}})),{$:o,marker:c,C:t=>{L(),m(t.s*d,(1-t.v)*_)},e:b}},ft=t=>{let e=t.h/60,l=t.s,r=t.v,n=(t,e,l)=>255*(l-l*e*H(0,O(t,4-t,1)));return{r:V(n((5+e)%6,l,r)),g:V(n((3+e)%6,l,r)),b:V(n((1+e)%6,l,r)),a:t.a}},wt=(t,e)=>{let l=t;if(!I(t)){let r="",n="",o=", ";t.a<1&&(r="a",n=o+t.a);let s=e===b?"%":"";l=e+r+"("+t[e[0]]+o+t[e[1]]+s+o+t[e[2]]+s+n+")"}return l},gt=t=>{let e=t.toString(16);return e.length<2?"0"+e:e},mt=({r:t,g:e,b:l,a:r})=>"#"+gt(t)+gt(e)+gt(l)+(r<1?gt(V(255*r)):""),bt=(t,e)=>{e=e?"%":0;let l=t.v,r=l*(1-t.s/2),n=r&&1!==r?(l-r)/O(r,1-r):0;return{h:t.h,s:V(100*n)+e,l:V(100*r)+e,a:V(100*t.a)/100}},vt=F("canvas").getContext("2d"),yt=/^hsla?\(\s*([+-]?\d*\.?\d+)(\w*)?(?:(?:\s+([+-]?\d*\.?\d+)%\s*([+-]?\d*\.?\d+)%(?:\s*\/\s*([+-]?\d*\.?\d+%?))?)|(?:\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%(?:\s*,\s*([+-]?\d*\.?\d+%?))?))\s*\)?$/i,xt=/^#[0-9a-f]{6}$/i,At=(t,e)=>{let l,r;if((t=t.trim()).length>=10){const e=t.match(yt);if(e){let t=M(e[1]),n=e[2],o=P(e[3]||e[6]),s=P(e[4]||e[7]),i=e[5]||e[8];t*="turn"===n?360:"rad"===n?180/PI:"grad"===n?.9:1;let a=360;t=(V(t)%a+a)%a,i=i?P("%"===i.slice(-1)?M(i)/100:i,1):1,l={h:t,s:o,l:s,a:i},r=b}}if(!l){if(vt.fillStyle="#000",vt.fillStyle=t,t=vt.fillStyle,xt.test(t))l={r:k((n=t).slice(1,3),16),g:k(n.slice(3,5),16),b:k(n.slice(5,7),16),a:1};else{let[e,r,n,o]=t.match(/\((.+)\)/)[1].split(",").map((t=>M(t)));l={r:e,g:r,b:n,a:o?V(100*o)/100:1}}r=m}var n;return e?wt(l,r):{I:l,P:r}},Lt=(t,e)=>{const l=t=>F("","alwan__container",t);let r=((t,e)=>{const l={$:t,e:[],_(e){let{preset:o,classname:s}=e,{$:i,e:a}=l;a=X(a,i),o!==(i!==t)&&(i=o?q(F(n,"lw-ref",null,{type:n,id:t.id}),t):q(t,i)),s&&s.split(/\s+/).map((t=>{U(i,t,!0)})),W(a,i,u,r),l.$=i,l.e=a}},r=t=>{e.toggle()};return l})(t,e),s=at(e),i=s.$,p=_t(i,e),c=l(i),m=((t,e)=>{let l=!1;const r=F("","lw-mr",t),s={e:[],_(t){let{preview:e,copy:l}=t,o=s.$,a=s.cp;e!==!!o&&(o=e?F("","alwan__preview",r):B(o,!0),l&&a&&(o||r).appendChild(a)),l?a||(a=F(n,x,o||r,{type:n},(t=>{i(t)}))):a=B(a,!0),R(r,a||o),s.$=o,s.cp=a}},i=t=>{t=t||s.cp,G(t),F(o,"",t,l?ht:ct)};return W(s.e,r,[u,"mouseleave",f,w],(t=>{if(s.cp&&!e.config.disabled){let r=t.type,n=r===f;l||r!==u?(n||l&&(l=!1,i()),U(s.cp,y,n)):(e._s.T(),l=!0,i())}})),s})(c,e),b=((t,e)=>{const l=F("","lw-w100",t),r=e._s.u,n=(t,e,r)=>F(d,t,l,{type:"range",max:e,step:r}),o={e:[],hue:n("alwan__slider alwan__slider--hue",360),alpha:null,_({opacity:t}){let e=o.alpha;t!==!!e&&(o.alpha=t?n("alwan__slider alwan__slider--alpha",1,.01):B(e,!0)||r({a:1}))},D(t){let{alpha:e,hue:l}=o;l.value=360-t.h,e&&(e.value=t.a)}};return W(o.e,l,[d,_],(t=>{let l=t.target,n=l.valueAsNumber,s={};l===o.hue?s.h=360-n:s.a=n,r(s),e._e.i(t.type===_?_:a,l)})),o})(c,e),v=((t,e)=>{let l,r,s,i,p=[],c=[];const{config:w,_s:m,_e:{i:b}}=e,v={_(e){let i,{inputs:a,format:u}=e;p=$.filter((t=>a[t])),i=p.length,i?(l||(l=F("","alwan__inputs",t)),1===i?r=B(r,!0):r||(r=F(n,x,t,{type:n},(t=>{F(o,"",t,dt)}))),s=H(p.indexOf(u),0),u=p[s]):(l=B(l,!0),r=B(r,!0),u=$.includes(u)?u:$[0]),w.format=u,y(u),R(t,i)},D(t){S(v.$,((e,l)=>{e.value=t[l]}))}},y=t=>{if(v.$={},i=[],l){let{singleInput:e,opacity:r}=w,n=e||t==g?[t]:(t+(r?"a":"")).split("");G(l),n.forEach(((t,e)=>{F("label","lw-label",l,!1,(l=>{v.$[t]=i[e]=F(d,"alwan__input",l,{type:"text"}),F("span","",l,{text:t})}))})),m.u({})}};return W(c,t,u,(t=>{t.target===r&&(s=(s+1)%p.length,w.format=p[s],y(p[s]))})),W(c,t,d,(t=>{let e=t.target.value;if(e.trim()){let t="",l=p[s];t=w.singleInput||l===g?e:l+"("+i.reduce(((t,e)=>(t&&t+",")+e.value),"")+")",m.t(t,v)&&b(a,v.$)}})),W(c,t,[f,_],(t=>{t.type===f?m.k():m.S(v.$)})),W(c,t,h,(t=>{"Enter"===t.key&&e.close()})),v.e=c,v})(l(i),e),L=((t,e)=>{let l,r=F("","alwan__swatches",t);const o=t=>F(n,"alwan__swatch",r,{type:n},(e=>{K(e,A,At(t,!0))})),s={e:[],_(t){let e=[];l=t.swatches,R(r,l),G(r),l.forEach(((t,l)=>{e[l]=o(t)})),s.$=e},F(t){let e=l.push(t)-1;s.$[e]=o(t),R(r,l)},N(t){let e=l.findIndex(((e,l)=>t===e||k(t)===l)),n=s.$;e>-1&&(l.splice(e,1),B(n[e]),n.splice(e,1),R(r,l))}};return W(s.e,t,u,(t=>{let l=t.target;Z(l)===r&&T(e,l.style.getPropertyValue("--lw-color"),l)})),s})(i,e);return{ref:r,app:s,palette:p,preview:m,sliders:b,inputs:v,swatches:L}},$t=t=>{let e,n={h:0,s:0,v:0,a:1},o=ft(n),s="",{config:i,_e:a}=t;const u=(t,e)=>{let l=(t=t||i.format)===g,r=l?mt(o):t===b?bt(n,!e):o;return e||l?{[t]:wt(r,t)}:r},p=(t,e,l,r)=>{i.opacity&&(l+="a");let n=r?[]:{};return l!==v&&(n.toString=()=>e||wt(t,l)),l.split("").reduce(((e,l,n)=>(e[r?n:l]=t[l],e)),n)};return{u(e,l,r){if(!i.disabled){C(n,e),o=r||ft(n),s=wt(o,m);let a=t._c,{palette:p,sliders:c,inputs:h}=a;K(a.preview.$,A,s),K(a.ref.$,A,s),(l||!z(e.a))&&K(c.alpha,m,o.r+","+o.g+","+o.b),z(e.h)&&K(p.$,"hue",n.h),l!==h&&h.D(u("",i.singleInput)),l&&(c.D(n),p.C(n))}},t(t,e){let l,r,{I:n,P:o}=At(t),s=u(o),i=!E(n,s);return i&&(o===b?r=(t=>{let e=t.s/100,l=t.l/100,r=l+e*O(l,1-l);return{h:t.h,s:r?2*(1-l/r):0,v:r,a:t.a}})(n):(l=n,r=(t=>{let e=t.r/255,l=t.g/255,r=t.b/255,n=H(e,l,r),o=n-O(e,l,r),s=0===n?0:o/n;return{h:V((360+60*(0===o?0:n===e?(l-r)/o%6:n===l?(r-e)/o+2:n===r?(e-l)/o+4:0))%360),s:s,v:n,a:V(100*t.a)/100}})(n)),this.u(r,e,l)),i},T(){S(u("",!0),(t=>{let e=navigator.clipboard;e?e.writeText(t):F(d,"",r,null,(e=>{e.value=t,e.select(),l.execCommand("copy"),B(e)}))}))},Z:{[v]:()=>p(n,"",v,!1),[m]:t=>p(o,s,m,t),[b]:t=>p(bt(n),"",b,t),[g]:()=>mt(o)},k(){e=u()},S(t){E(e,u())||a.i(_,t)}}};class Ht{static version="1.0.2";static defaults=J;constructor(t,e){const l=this;t=D(t),l.config=C({},Ht.defaults,e),l._e=(t=>{const e={[s]:[],[i]:[],[_]:[],[a]:[]};return{i:(l,r)=>{!t.config.disabled&&e[l]&&e[l].forEach((e=>{l===a||l===_?e(t._s.Z,r||t):e()}))},q:(t,l)=>{e[t]&&e[t].push(l)},B:(t,l)=>{let r=e[t];r?e[t]=l?r.filter((t=>t!==l)):[]:null==t&&S(e,((t,l)=>{e[l]=[]}))}}})(l),l._s=$t(l),l._c=Lt(t,l),l._c.app.p(l.config)}setOptions(t){this._c.app.p(t)}isOpen(){return this._c.app.m()}open(){this._c.app.A()}close(){this._c.app.L()}toggle(){this._c.app.H()}on(t,e){this._e.q(t,e)}off(t,e){this._e.B(t,e)}setColor(t){let e,l=this;if(!I(t)&&(e=[m,b,v].find((e=>e.split("").every((e=>t[e]&&!isNaN(t[e]))))),e)){let r=t.a;t.a=null!=r?r:1,e===v&&(e=l.config.format,t.h=(t.h%360+360)%360,t.s=P(t.s)/100,t.v=P(t.v)/100,e===b?t=bt(t):(t=ft(t),e===g&&(t=mt(t)))),t=wt(t,e)}return l._s.t(t,!0),l}getColor(){return this._s.Z}addSwatch(t){this._c.swatches.F(t)}removeSwatch(t){this._c.swatches.N(t)}enable(){this._c.app.O(!1)}disable(){this._c.app.O(!0)}reset(){T(this,this.config.default)}reposition(){this._c.app.V()}trigger(t){this._e.i(t)}destroy(){let t=this,e=t._c;e.ref._({preset:!1}),S(e,(t=>{t.e.forEach((t=>{Q(t,!0)}))})),S(t,((e,l)=>{delete t[l]}))}}return e=e.default}()}));
//# sourceMappingURL=alwan.min.js.map